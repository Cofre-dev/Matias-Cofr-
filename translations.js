// ===============================
// Translation Data
// ===============================

const translations = {
    es: {
        // Navigation & Header
        "name": "Matías Cofré",
        
        // Hero Section
        "hero-greeting": "Hola, soy",
        "hero-role": "Software Engineer & Backend Developer",
        "hero-description": "Ingeniero en informática especializado en desarrollo Backend y automatización de procesos. Transformo ideas complejas en soluciones tecnológicas eficientes que impulsan el crecimiento empresarial.",
        "hero-contact": "Contacto",
        "hero-projects": "Ver Proyectos",
        "view-tech": "Ver Tecnologías",
        
        // Tech Stack
        "tech-stack": "Tecnologías que domino",
        
        // About Section
        "about-title": "Sobre Mí",
        "about-p1": "Soy un desarrollador backend con una mentalidad orientada al crecimiento y la innovación. Mi experiencia abarca desde la automatización de procesos complejos hasta el diseño de arquitecturas escalables en los sectores financiero, minero y tributario.",
        "about-p2": "Mi enfoque va más allá del código: busco entender cómo la tecnología puede resolver problemas reales del negocio. Combino habilidades técnicas sólidas con una visión estratégica para crear soluciones que realmente impacten en la eficiencia operacional.",
        "about-p3": "Actualmente curso mi último año de Ingeniería en Informática mientras trabajo como Software Engineer, demostrando mi capacidad de adaptación y constante búsqueda de crecimiento profesional.",
        "years-experience": "Años de Experiencia",
        "efficiency-improvement": "Mejora en Eficiencia",
        "industries": "Industrias",
        
        // Experience Section
        "experience-title": "Experiencia Profesional",
        "current-job-title": "Software Engineer",
        "current-company": "Ara y Bustamante Consultores",
        "current-period": "Sep 2024 - Presente",
        "current-achievement-1": "Diseñé arquitectura segura y escalable integrando web corporativa con portal de aplicaciones",
        "current-achievement-2": "Desarrollé Bot automatizado del SII y app de conversión de divisas en tiempo real",
        "current-achievement-3": "Transformé infraestructura de datos migrando de Excel a MySQL",
        "current-achievement-4": "Lideré adopción tecnológica capacitando equipos en CRM Zoho",
        
        "previous-job-title": "Data Analyst & Process Automation Specialist",
        "previous-company": "Sodexo Chile",
        "previous-period": "Ago 2023 - Ago 2024",
        "previous-achievement-1": "Implementé soluciones automatizadas que mejoraron la eficiencia en 65%",
        "previous-achievement-2": "Desarrollé algoritmos de limpieza de datos con Pandas y VBA",
        "previous-achievement-3": "Colaboré con equipos multidisciplinarios optimizando flujos de información",
        
        // Skills Section
        "skills-title": "Competencias Técnicas",
        "backend-title": "Backend & APIs",
        "database-title": "Bases de Datos",
        "enterprise-title": "Sistemas Empresariales",
        "analysis-title": "Análisis & Visualización",
        "methodology-title": "Metodologías",
        
        // Projects Section
        "projects-title": "Proyectos Destacados",
        "project1-title": "Bot Automatizado SII",
        "project1-description": "Automatización de procesos tributarios que reduce significativamente los tiempos de gestión y mejora la precisión en el manejo de documentos fiscales.",
        "project2-title": "Conversor de Divisas",
        "project2-description": "Aplicación en tiempo real que utiliza APIs del Banco Central para conversión de divisas con interfaz intuitiva y datos actualizados.",
        "project3-title": "Migración de Datos",
        "project3-description": "Transformación completa de infraestructura de datos desde Excel a MySQL, mejorando integridad y velocidad de consultas para análisis empresarial.",
        
        // Contact Section
        "contact-title": "Conectemos",
        "contact-description": "¿Tienes un proyecto interesante? ¿Buscas alguien que combine habilidades técnicas con visión de negocio? Hablemos sobre cómo puedo contribuir a tu equipo.",
        
        // Footer
        "footer-text": "© 2024 Matías Cofré. Construido con pasión y código limpio."
    },
    
    en: {
        // Navigation & Header
        "name": "Matías Cofré",
        
        // Hero Section
        "hero-greeting": "Hi, I'm",
        "hero-role": "Software Engineer & Backend Developer",
        "hero-description": "Computer Engineer specialized in Backend development and process automation. I transform complex ideas into efficient technological solutions that drive business growth.",
        "hero-contact": "Contact",
        "hero-projects": "View Projects",
        "view-tech": "View Technologies",
        
        // Tech Stack
        "tech-stack": "Technologies I master",
        
        // About Section
        "about-title": "About Me",
        "about-p1": "I'm a backend developer with a growth and innovation-oriented mindset. My experience spans from complex process automation to designing scalable architectures in the financial, mining, and tax sectors.",
        "about-p2": "My approach goes beyond code: I seek to understand how technology can solve real business problems. I combine solid technical skills with strategic vision to create solutions that truly impact operational efficiency.",
        "about-p3": "I'm currently in my final year of Computer Engineering while working as a Software Engineer, demonstrating my adaptability and constant pursuit of professional growth.",
        "years-experience": "Years of Experience",
        "efficiency-improvement": "Efficiency Improvement",
        "industries": "Industries",
        
        // Experience Section
        "experience-title": "Professional Experience",
        "current-job-title": "Software Engineer",
        "current-company": "Ara y Bustamante Consultores",
        "current-period": "Sep 2024 - Present",
        "current-achievement-1": "Designed secure and scalable architecture integrating corporate website with application portal",
        "current-achievement-2": "Developed automated SII Bot and real-time currency conversion app",
        "current-achievement-3": "Transformed data infrastructure migrating from Excel to MySQL",
        "current-achievement-4": "Led technology adoption by training teams in Zoho CRM",
        
        "previous-job-title": "Data Analyst & Process Automation Specialist",
        "previous-company": "Sodexo Chile",
        "previous-period": "Aug 2023 - Aug 2024",
        "previous-achievement-1": "Implemented automated solutions that improved efficiency by 65%",
        "previous-achievement-2": "Developed data cleaning algorithms with Pandas and VBA",
        "previous-achievement-3": "Collaborated with multidisciplinary teams optimizing information flows",
        
        // Skills Section
        "skills-title": "Technical Skills",
        "backend-title": "Backend & APIs",
        "database-title": "Databases",
        "enterprise-title": "Enterprise Systems",
        "analysis-title": "Analysis & Visualization",
        "methodology-title": "Methodologies",
        
        // Projects Section
        "projects-title": "Featured Projects",
        "project1-title": "Automated SII Bot",
        "project1-description": "Tax process automation that significantly reduces management times and improves accuracy in handling fiscal documents.",
        "project2-title": "Currency Converter",
        "project2-description": "Real-time application that uses Central Bank APIs for currency conversion with intuitive interface and updated data.",
        "project3-title": "Data Migration",
        "project3-description": "Complete data infrastructure transformation from Excel to MySQL, improving integrity and query speed for business analysis.",
        
        // Contact Section
        "contact-title": "Let's Connect",
        "contact-description": "Do you have an interesting project? Looking for someone who combines technical skills with business vision? Let's talk about how I can contribute to your team.",
        
        // Footer
        "footer-text": "© 2024 Matías Cofré. Built with passion and clean code."
    }
};

// ===============================
// Translation Utility Functions
// ===============================

/**
 * Get translation for a specific key
 * @param {string} key - Translation key
 * @param {string} language - Language code (es/en)
 * @returns {string} Translated text or key if not found
 */
function getTranslation(key, language = 'es') {
    if (translations[language] && translations[language][key]) {
        return translations[language][key];
    }
    
    // Fallback to Spanish if translation not found
    if (language !== 'es' && translations.es && translations.es[key]) {
        return translations.es[key];
    }
    
    // Return key if no translation found
    return key;
}

/**
 * Get all available languages
 * @returns {Array} Array of language codes
 */
function getAvailableLanguages() {
    return Object.keys(translations);
}

/**
 * Check if a language is supported
 * @param {string} language - Language code to check
 * @returns {boolean} True if language is supported
 */
function isLanguageSupported(language) {
    return translations.hasOwnProperty(language);
}

/**
 * Get language name in native format
 * @param {string} language - Language code
 * @returns {string} Language name
 */
function getLanguageName(language) {
    const languageNames = {
        'es': 'Español',
        'en': 'English'
    };
    
    return languageNames[language] || language.toUpperCase();
}

/**
 * Detect browser language and return supported language code
 * @returns {string} Supported language code
 */
function detectBrowserLanguage() {
    const browserLang = navigator.language || navigator.userLanguage;
    const langCode = browserLang.split('-')[0].toLowerCase();
    
    return isLanguageSupported(langCode) ? langCode : 'es';
}

/**
 * Validate all translation keys are present in all languages
 * @returns {Object} Validation report
 */
function validateTranslations() {
    const languages = getAvailableLanguages();
    const allKeys = new Set();
    const report = {
        valid: true,
        missing: {},
        extra: {}
    };
    
    // Collect all keys from all languages
    languages.forEach(lang => {
        Object.keys(translations[lang]).forEach(key => allKeys.add(key));
    });
    
    // Check each language for missing/extra keys
    languages.forEach(lang => {
        const langKeys = Object.keys(translations[lang]);
        const missing = [...allKeys].filter(key => !langKeys.includes(key));
        const extra = langKeys.filter(key => !allKeys.has(key));
        
        if (missing.length > 0) {
            report.missing[lang] = missing;
            report.valid = false;
        }
        
        if (extra.length > 0) {
            report.extra[lang] = extra;
            report.valid = false;
        }
    });
    
    return report;
}

// ===============================
// Export for external use
// ===============================
if (typeof module !== 'undefined' && module.exports) {
    module.exports = {
        translations,
        getTranslation,
        getAvailableLanguages,
        isLanguageSupported,
        getLanguageName,
        detectBrowserLanguage,
        validateTranslations
    };
}

// Make available globally
window.translations = translations;
window.translationUtils = {
    getTranslation,
    getAvailableLanguages,
    isLanguageSupported,
    getLanguageName,
    detectBrowserLanguage,
    validateTranslations
};

// Development helper: Log translation validation in console
if (process?.env?.NODE_ENV === 'development') {
    const validation = validateTranslations();
    if (!validation.valid) {
        console.warn('Translation validation failed:', validation);
    } else {
        console.log('✅ All translations validated successfully');
    }
}